<!DOCTYPE html>
<html lang="en">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>AV Shopping</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   {% load static %}
   <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
   <!-- style css -->
   <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
   <!-- Responsive-->
   <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
   <!-- fevicon -->
   <link rel="icon" href="{% static 'images/site-logo.png' %}" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">
   <!-- Tweaks for older IEs-->
   <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
   <!-- fonts -->
   <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
   <!-- font awesome -->
   <link rel="stylesheet" type="text/css"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
   <!--  -->
   <!-- owl stylesheets -->
   <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Poppins:400,700&display=swap&subset=latin-ext"
      rel="stylesheet">
   <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
   <link rel="stylesoeet" href="{% static 'css/owl.theme.default.min.css' %}">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen">
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
   <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap1.css' %}" />
   <!-- font awesome style -->
   <link href="{% static 'css/font-awesome1.min.css' %}" rel="stylesheet" />
   <!-- Custom styles for this template -->
   <link href="{% static 'css/style1.css' %}" rel="stylesheet" />
   <!-- responsive style -->
   <link href="{% static 'css/responsive1.css' %}" rel="stylesheet" />

   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
   <!-- banner bg main start -->
   <div class="banner_bg_main">
      <!-- header top section start -->
      <div class="container">
         <div class="header_section_top">
            <div class="row">
               <div class="col-sm-12">
                  <div class="custom_menu">
                     <ul>
                        <li><a href="{% url 'shophome' %}" style="color: #fd5502;">Home</a></li>
                        <li><a href="{% url 'my_orders' %}">My Orders</a></li>
                        <li><a href="/tracker">Tracker</a></li>
                        <li><a href="{% url 'tracker' %}">About</a></li>
                        <li><a href="{% url 'contact' %}">Contcat Us</a></li>
                        <div class="lang_box" id="google_translate_element"></div>
                        {% if user.is_authenticated %}
                        <!-- <li class="username">Welcome {{user.username}}</li>
                        <li><button class="logout btn btn-outline-danger" type="button">Logout</button></li> -->
                        <a id="user_image_btn" href="profile"><img
                              id="user_image" src="{{user.image.url}}" /></a>
                        {% else %}
                        <li class="login_signup">
                           <a type="button" class="btn my_profile" href="account">
                              <svg class="account_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                 <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                 <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                               </svg>
                               <span class="login_reg">Login/Register</span>
                           </a>
                        </li>
                        {% endif %}
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- header top section start -->
      <!-- header section start -->
      <div class="header_section">
         <div class="container">
            <div class="containt_main">
               <form method="post" id="cat_form_id" action="/">
                  {% csrf_token %}
                  <div class="btn-group">
                     <button class="btn btn-sm dropdown-toggle" style="background-color: white; font-size: 18px;" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                       Categories
                     </button>
                     <ul class="dropdown-menu">
                        {% for cat in all_cats %}
                        {% if cat == category %}
                        <div class="form-check">
                           <input class="form-check-input check_cat" name="cat_value" style="border: 2px solid black;" type="checkbox" value="{{category}}" checked>
                           <label class="form-check-label" style="font-weight: bold;" for="flexCheckDefault">
                            {{cat}}
                           </label>
                         </div>
                         {% else %}
                         <div class="form-check">
                           <input class="form-check-input check_cat" name="cat_value" style="border: 2px solid black;" type="checkbox" value="">
                           <label class="form-check-label" style="font-weight: bold;" for="flexCheckDefault">
                            {{cat}}
                           </label>
                         </div>
                         {% endif %}
                         {% endfor %}
                     </ul>
                   </div>
               </form>
               <!-- <span class="cat-done">&#9989;</span> -->
               <div class="main">
                  <!-- Another variation with a button -->
                  <form action="{% url 'search' %}" method="post">
                     {% csrf_token %}
                     <div class="input-group">
                        <input type="text" required maxlength="55" name="query" class="form-control"
                           placeholder="Search your item...">
                        <div class="input-group-append">
                           <button class="btn btn-secondary" type="submit"
                              style="background-color: #f26522; border-color:#f26522 ">
                              <i class="fa fa-search"></i>
                           </button>
                        </div>
                     </div>
                  </form>
               </div>
               <div class="header_box">
                  <div class="login_menu">
                     <button type="button" id="cart_btn" class="btn btn-light mx-3">
                        Cart
                        (<span id="cart_len">{{len_cart}}</span>)
                     </button>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- header section end -->
      <!-- banner section start -->
      <div class="banner_section layout_padding">
         <div class="container">
            <div id="my_slider" class="carousel slide" data-ride="carousel">
               <div class="carousel-inner">
                  <div class="carousel-item active">
                     <div class="row">
                        <div class="col-sm-12">
                           <h1 class="banner_taital">Get Start <br>Your favriot shoping</h1>
                           <div class="buynow_bt"><a href="/all_products">Buy Now</a></div>
                        </div>
                     </div>
                  </div>
                  <div class="carousel-item">
                     <div class="row">
                        <div class="col-sm-12">
                           <h1 class="banner_taital">Add to Cart <br>Your products</h1>
                           <div class="buynow_bt"><a href="/all_products">Buy Now</a></div>
                        </div>
                     </div>
                  </div>
                  <div class="carousel-item">
                     <div class="row">
                        <div class="col-sm-12">
                           <h1 class="banner_taital">Checkout to order <br>Your products</h1>
                           <div class="buynow_bt"><a href="/all_products">Buy Now</a></div>
                        </div>
                     </div>
                  </div>
               </div>
               <a class="carousel-control-prev" href="#my_slider" role="button" data-slide="prev">
                  <i class="fa fa-angle-left"></i>
               </a>
               <a class="carousel-control-next" href="#my_slider" role="button" data-slide="next">
                  <i class="fa fa-angle-right"></i>
               </a>
            </div>
         </div>
      </div>
      <!-- banner section end -->
   </div>
   <!-- banner bg main end -->
   <!-- product section -->

   <section class="product_section layout_padding">
      <div class="container">
         <div class="row">
            <!-- <div class="heading_container heading_center">
             <h2>
                 <span>Top Discount Products</span>
             </h2>
         </div> -->
            {% for product in allprods %}
            <div class="col-sm-6 col-md-4 col-lg-4">
               <div class="box">
                  <div class="option_container">
                     <div class="options">
                        <a href="productview/{{product.id}}" class="option1">
                           View
                        </a>
                        {% if user.is_authenticated %}
                        {% if product.name in cart_items_list %}
                        <a class="btn btn-primary disabled btn-sm" style="color:white;">Added to Cart</a>
                        {% else %}
                        <a class="btn btn-primary btn-sm cart" style="color: white;" data-id="{{product.id}}">Add to
                           Cart</a>
                        {% endif %}
                        {% else %}
                        <a class="btn btn-primary btn-sm no_cart" style="color: white;" data-id="{{product.id}}">Add to
                           Cart</a>
                        {% endif %}
                     </div>
                  </div>
                  <div class="img-box">
                     <img src="/media/{{product.image}}" alt="">
                  </div>
                  <div class="detail-box">
                     <h5 id="name">
                        {{product.name|slice:"0:15"}}
                     </h5>
                     <p id="namepr{{product.id}}" hidden>{{product.name}}</p>
                     <h6>
                        Rs. <span id="pricepr{{product.id}}">{{product.price}}</span>
                     </h6>
                  </div>
                  <div class="text-center">
                     <!-- <h6 align="center">
                        <b style="color: rgb(0, 27, 80);">{{product.discount}}% off</b>
                     </h6> -->
                  </div>
               </div>
            </div>
            {% endfor %}
         </div>
      </div>
   </section>

   <!-- end product section -->
   <!-- copyright section start -->
   <div class="copyright_section">
      <div class="container">
         <p class="copyright_text">© 2022 All Rights Reserved.</p>
      </div>
   </div>
   <!-- copyright section end -->
   <!-- Javascript files-->
   <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
      integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
      crossorigin="anonymous"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
      integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
      crossorigin="anonymous"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
   <script src="{% static 'js/index.js' %}" type="text/javascript"></script>
   <script type="text/javascript"
      src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
   <!-- <script>
      function googleTranslateElementInit() {
         new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
         $('.goog-logo-link').remove()
         $('.skiptranslate').css("margin-bottom", "-17px")
         $('.lang_box').css({ "margin-top": "3px", "margin-left": "25px" })
         $('*:contains("Powered by")').each(function () {
            if ($(this).children().length < 1)
               $(this).css({ "color": "#2b2a29" })
         });
      }
      function openNav() {
         document.getElementById("mySidenav").style.width = "250px";
      }

      function closeNav() {
         document.getElementById("mySidenav").style.width = "0";
      }
   </script> -->
</body>

</html>
<!-- <script>   
   $('.no_cart').on('click', function () {
      toastr.info('Please sign in to your account for use cart!')
      $('.toast').css('background-color', '#2f96b4');
   })
   $('.check_cat').on('click', function () {
      $(this).attr('name', 'crnt_cat_value');
      $('.check_cat').val('');
      let cate_name = $(this).next().text().trim().replace('\n', '');
      $(this).val(cate_name);
      $('#cat_form_id').submit();
   })

   $('#cart_btn').on('click', function () {
      if ($('#cart_len').text() > 0) {
         window.location = '/cart';
      }
      else {
         toastr.info('Your cart is empty, Please add some items in your cart!');
         $('.toast').css('background-color', '#2f96b4');
      }
   });

   $('.cart').on('click', function () {
      let self = $(this);
      let product_id = self.attr('data-id');
      data = {
         'product_id': product_id,
         'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val()
      }
      $.ajax({
         type: 'POST',
         url: "{% url 'shophome' %}",
         data: data,
         success: function (data) {
            if (data.success == 'Item added to cart.') {
               $('#cart_len').text(data.len_cart);
               toastr.success(data.success);
               $('.toast').css('background-color', '#51a351');
               self.removeClass('cart');
               self.text('Added to Cart');
               self.addClass("disabled")
            }
            else {
               toastr.success(data.error);
               $('.toast').css('background-color', '#bd362f');
            }
         }
      })
   }) -->
<!-- </script> -->